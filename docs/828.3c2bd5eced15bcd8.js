(()=>{var Le={952:A=>{const q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",D=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],d=typeof BigInt<"u"?BigInt:Number;function S(v){let c=v;return c&d(1)&&(c=~c),c>>=d(1),+c.toString()}function le(v){let c="",p=d(v);for(;p>31;){const L=p&d(31)|d(32);c+=q[L],p>>=d(5)}return c+q[p]}function K(v){let c=d(v);const p=c<0;return c<<=d(1),p&&(c=~c),le(c)}A.exports={encode:function R({precision:v=5,thirdDim:c=0,thirdDimPrecision:p=0,polyline:L}){const N=10**v,I=10**p,Y=function ee(v,c,p){if(v<0||v>15)throw new Error("precision out of range. Should be between 0 and 15");if(p<0||p>15)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(c<0||c>7||4===c||5===c)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");const L=p<<7|c<<4|v;return le(1)+le(L)}(v,c,p),P=[];let U=d(0),X=d(0),k=d(0);return L.forEach(C=>{const ie=d(Math.round(C[0]*N));P.push(K(ie-U)),U=ie;const $=d(Math.round(C[1]*N));if(P.push(K($-X)),X=$,c){const he=d(Math.round(C[2]*I));P.push(K(he-k)),k=he}}),[...Y,...P].join("")},decode:function y(v){const c=function E(v){let c=d(0),p=d(0);const L=[];if(v.split("").forEach(N=>{const I=d(function g(v){const c=v.charCodeAt(0);return D[c-45]}(N));c|=(I&d(31))<<p,(I&d(32))===d(0)?(L.push(c),c=d(0),p=d(0)):p+=d(5)}),p>0)throw new Error("Invalid encoding");return L}(v),p=function b(v,c){if(1!=+v.toString())throw new Error("Invalid format version");const p=+c.toString();return{precision:15&p,thirdDim:p>>4&7,thirdDimPrecision:p>>7&15}}(c[0],c[1]),L=10**p.precision,N=10**p.thirdDimPrecision,{thirdDim:I}=p;let Y=0,P=0,U=0;const X=[];let k=2;for(;k<c.length;)Y+=S(c[k])/L,P+=S(c[k+1])/L,I?(U+=S(c[k+2])/N,X.push([Y,P,U]),k+=3):(X.push([Y,P]),k+=2);if(k!==c.length)throw new Error("Invalid encoding. Premature ending reached");return{...p,polyline:X}},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3}},358:(A,H,q)=>{var D;!function(){"use strict";function J(h,d){var y=h.x-d.x,g=h.y-d.y;return y*y+g*g}function j(h,d,y){var g=d.x,E=d.y,b=y.x-g,S=y.y-E;if(0!==b||0!==S){var R=((h.x-g)*b+(h.y-E)*S)/(b*b+S*S);R>1?(g=y.x,E=y.y):R>0&&(g+=b*R,E+=S*R)}return(b=h.x-g)*b+(S=h.y-E)*S}function z(h,d,y,g,E){for(var S,b=g,R=d+1;R<y;R++){var ee=j(h[R],h[d],h[y]);ee>b&&(S=R,b=ee)}b>g&&(S-d>1&&z(h,d,S,g,E),E.push(h[S]),y-S>1&&z(h,S,y,g,E))}function Z(h,d){var y=h.length-1,g=[h[0]];return z(h,0,y,d,g),g.push(h[y]),g}function ue(h,d,y){if(h.length<=2)return h;var g=void 0!==d?d*d:1;return h=y?h:function ne(h,d){for(var E,y=h[0],g=[y],b=1,S=h.length;b<S;b++)J(E=h[b],y)>d&&(g.push(E),y=E);return y!==E&&g.push(E),g}(h,g),Z(h,g)}void 0!==(D=function(){return ue}.call(H,q,H,A))&&(A.exports=D)}()}},we={};function de(A){var H=we[A];if(void 0!==H)return H.exports;var q=we[A]={exports:{}};return Le[A](q,q.exports,de),q.exports}(()=>{"use strict";const A=Symbol("Comlink.proxy"),H=Symbol("Comlink.endpoint"),q=Symbol("Comlink.releaseProxy"),D=Symbol("Comlink.thrown"),J=r=>"object"==typeof r&&null!==r||"function"==typeof r,z=new Map([["proxy",{canHandle:r=>J(r)&&r[A],serialize(r){const{port1:e,port2:t}=new MessageChannel;return Z(r,e),[t,[t]]},deserialize:r=>(r.start(),function d(r,e){return g(r,[],e)}(r))}],["throw",{canHandle:r=>J(r)&&D in r,serialize({value:r}){let e;return e=r instanceof Error?{isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:{isError:!1,value:r},[e,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}}]]);function Z(r,e=self){e.addEventListener("message",function t(n){if(!n||!n.data)return;const{id:i,type:s,path:a}=Object.assign({path:[]},n.data),u=(n.data.argumentList||[]).map(v);let o;try{const f=a.slice(0,-1).reduce((l,w)=>l[w],r),m=a.reduce((l,w)=>l[w],r);switch(s){case"GET":o=m;break;case"SET":f[a.slice(-1)[0]]=v(n.data.value),o=!0;break;case"APPLY":o=m.apply(f,u);break;case"CONSTRUCT":o=function ee(r){return Object.assign(r,{[A]:!0})}(new m(...u));break;case"ENDPOINT":{const{port1:l,port2:w}=new MessageChannel;Z(r,w),o=function R(r,e){return S.set(r,e),r}(l,[l])}break;case"RELEASE":o=void 0;break;default:return}}catch(f){o={value:f,[D]:0}}Promise.resolve(o).catch(f=>({value:f,[D]:0})).then(f=>{const[m,l]=K(f);e.postMessage(Object.assign(Object.assign({},m),{id:i}),l),"RELEASE"===s&&(e.removeEventListener("message",t),h(e))})}),e.start&&e.start()}function h(r){(function ue(r){return"MessagePort"===r.constructor.name})(r)&&r.close()}function y(r){if(r)throw new Error("Proxy has been released and is not useable")}function g(r,e=[],t=function(){}){let n=!1;const i=new Proxy(t,{get(s,a){if(y(n),a===q)return()=>c(r,{type:"RELEASE",path:e.map(u=>u.toString())}).then(()=>{h(r),n=!0});if("then"===a){if(0===e.length)return{then:()=>i};const u=c(r,{type:"GET",path:e.map(o=>o.toString())}).then(v);return u.then.bind(u)}return g(r,[...e,a])},set(s,a,u){y(n);const[o,f]=K(u);return c(r,{type:"SET",path:[...e,a].map(m=>m.toString()),value:o},f).then(v)},apply(s,a,u){y(n);const o=e[e.length-1];if(o===H)return c(r,{type:"ENDPOINT"}).then(v);if("bind"===o)return g(r,e.slice(0,-1));const[f,m]=b(u);return c(r,{type:"APPLY",path:e.map(l=>l.toString()),argumentList:f},m).then(v)},construct(s,a){y(n);const[u,o]=b(a);return c(r,{type:"CONSTRUCT",path:e.map(f=>f.toString()),argumentList:u},o).then(v)}});return i}function E(r){return Array.prototype.concat.apply([],r)}function b(r){const e=r.map(K);return[e.map(t=>t[0]),E(e.map(t=>t[1]))]}const S=new WeakMap;function K(r){for(const[e,t]of z)if(t.canHandle(r)){const[n,i]=t.serialize(r);return[{type:"HANDLER",name:e,value:n},i]}return[{type:"RAW",value:r},S.get(r)||[]]}function v(r){switch(r.type){case"HANDLER":return z.get(r.name).deserialize(r.value);case"RAW":return r.value}}function c(r,e,t){return new Promise(n=>{const i=function p(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}();r.addEventListener("message",function s(a){!a.data||!a.data.id||a.data.id!==i||(r.removeEventListener("message",s),n(a.data))}),r.start&&r.start(),r.postMessage(Object.assign({id:i},e),t)})}function L(r,e,t,n,i,s,a){try{var u=r[s](a),o=u.value}catch(f){return void t(f)}u.done?e(o):Promise.resolve(o).then(n,i)}function N(r){return function(){var e=this,t=arguments;return new Promise(function(n,i){var s=r.apply(e,t);function a(o){L(s,n,i,a,u,"next",o)}function u(o){L(s,n,i,a,u,"throw",o)}a(void 0)})}}var I=de(952),Y=de(358);function se(r,e,t){if(void 0===t&&(t={}),r.length<2)throw new Error("coordinates must be an array of two or more positions");return function C(r,e,t){void 0===t&&(t={});var n={type:"Feature"};return(0===t.id||t.id)&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.properties=e||{},n.geometry=r,n}({type:"LineString",coordinates:r},e,t)}function oe(r,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=r,t}function ae(r,e,t){if(null!==r)for(var n,i,s,a,u,o,f,w,m=0,l=0,T=r.type,O="FeatureCollection"===T,B="Feature"===T,Q=O?r.features.length:1,M=0;M<Q;M++){u=(w=!!(f=O?r.features[M].geometry:B?r.geometry:r)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var te=0;te<u;te++){var x=0,F=0;if(null!==(a=w?f.geometries[te]:f)){o=a.coordinates;var W=a.type;switch(m=!t||"Polygon"!==W&&"MultiPolygon"!==W?0:1,W){case null:break;case"Point":if(!1===e(o,l,M,x,F))return!1;l++,x++;break;case"LineString":case"MultiPoint":for(n=0;n<o.length;n++){if(!1===e(o[n],l,M,x,F))return!1;l++,"MultiPoint"===W&&x++}"LineString"===W&&x++;break;case"Polygon":case"MultiLineString":for(n=0;n<o.length;n++){for(i=0;i<o[n].length-m;i++){if(!1===e(o[n][i],l,M,x,F))return!1;l++}"MultiLineString"===W&&x++,"Polygon"===W&&F++}"Polygon"===W&&x++;break;case"MultiPolygon":for(n=0;n<o.length;n++){for(F=0,i=0;i<o[n].length;i++){for(s=0;s<o[n][i].length-m;s++){if(!1===e(o[n][i][s],l,M,x,F))return!1;l++}F++}x++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===ae(a.geometries[n],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function pe(r){var e=[1/0,1/0,-1/0,-1/0];return ae(r,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}pe.default=pe;const Fe=pe;class qe{constructor(e){this.response=e,this.code=401,this.message="Unauthorized"}}class Ie{constructor(){this.latestResponseId=0,this.lastResponseId=0,this.buffer=[],this.maxBuffer=4,this.pending=!1}get hasPendingRequests(){return this.pending}request(e,t){var n=this;return N(function*(){const i=new AbortController,s=Date.now();n.lastResponseId=s,n.pending=!0,n.buffer.length>n.maxBuffer&&(n.buffer[0].abort(),n.buffer.splice(0,1)),n.buffer.push(i);const a=yield fetch(e,{...t,signal:i.signal});if(n.cleanBuffer(i),200!==a.status)throw a;if(n.latestResponseId>s)throw new Error("Prev response");return n.pending=n.lastResponseId!==s,n.latestResponseId=s,yield a.json()})()}abortAllRequests(){this.buffer.forEach(e=>e.abort())}cleanBuffer(e){this.buffer=this.buffer.filter(t=>t!==e)}}const be=(r,e)=>r.some(t=>{const n=e[t.severity];return n&&("all"===n||n.includes(t.code))});function Ee(r,e){return Y(r.map(([t,n])=>({x:t,y:n})),e,!0).map(t=>[+t.y.toFixed(6),+t.x.toFixed(6)])}Z(new class De{constructor(){this.requester=new Ie}request(e){var t=this;return N(function*(){try{const n=yield t.requester.request(e.url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({}),...e.requestParams});if(!n.routes||0===n.routes.length||e.routeExcludeNotice&&((r,e)=>!!be(r.notices||[],e)||(r.routes||[]).some(t=>(t.sections||[]).some(n=>be(n.notices||[],e))))(n,e.routeExcludeNotice))throw new Error("No routes found");const i=n.routes.map((o,f)=>((r,e,t)=>{const{distance:n,cost:i,durationTime:s,waypoints:a,path:u,shape:o,shapePath:f,turnByTurnActions:m}=r.sections.reduce((l,w,T)=>{const O=(w.tolls||[]).reduce((G,_)=>(_.fares||[]).forEach(V=>G+=(V.convertedPrice||V.price).value),0),B=w.summary?.duration||0,Q=[];w.departure.place.originalLocation&&Q.push(w.departure.place.location),w.arrival.place.originalLocation&&(r.sections.length>=2&&T===r.sections.length-1||1===r.sections.length)&&Q.push(w.arrival.place.location);const M=function Ve(r){return(0,I.decode)(r).polyline}(w.polyline),te=t.shapePolylinePrecision?Ee(M,t.shapePolylinePrecision):M,x=(w.turnByTurnActions||[]).map(G=>{const[_,V]=M[G.offset];return{...G,offset:l.path.length+G.offset,position:{lat:_,lng:V}}});let F=[];if("default"===t.mode&&t.geoJSONShapeSplitStrategies?.default&&t.geoJSONShapeSplitStrategies.default.length>0||"drag"===t.mode&&t.geoJSONShapeSplitStrategies?.drag&&t.geoJSONShapeSplitStrategies.drag.length>0){const G=w.spans?.length;F=w.spans?.reduce((_,V,fe)=>{const _e=M.slice(V.offset,(fe<G-1?w.spans[fe+1].offset:M.length-1)+1),re=t.shapePolylinePrecision?Ee(_e,t.shapePolylinePrecision):_e,me=0===fe||fe===G-1;if(("default"===t.mode&&t.geoJSONShapeSplitStrategies?.default&&t.geoJSONShapeSplitStrategies.default.includes("jamFactor")||"drag"===t.mode&&t.geoJSONShapeSplitStrategies?.drag?.includes("jamFactor"))&&V.dynamicSpeedInfo){const ce=V.dynamicSpeedInfo.trafficSpeed/V.dynamicSpeedInfo.baseSpeed,Ue=_[_.length-1]?.properties?.jamFactor;if(ce===Ue&&_[_.length-1])_[_.length-1].geometry.coordinates.push(...re.slice(1,re.length)),_[_.length-1].properties.isMarginalChunk=me;else{const Je=se(re,{waypoint:l.waypointIndex,routeId:e,jamFactor:ce,isMarginalChunk:me});_.push(Je)}}else if(_.length>0)_[_.length-1].geometry.coordinates.push(...re.slice(1,re.length));else{const ce=se(re,{waypoint:l.waypointIndex,routeId:e,isMarginalChunk:me});_.push(ce)}return _},[])}else{const G=se(te,{waypoint:l.waypointIndex,routeId:e});F.push(G)}return{distance:l.distance+w.summary?.length||0,durationTime:l.durationTime+B,cost:l.cost+O,waypoints:[...l.waypoints,...Q],path:[...l.path,...M],turnByTurnActions:[...l.turnByTurnActions,...x],shape:oe([...l.shape?.features||[],...F]),shapePath:[...l.shapePath,...te],waypointIndex:"vehicle"===w.type&&r.sections[T+1]&&"vehicle"===r.sections[T+1].type?l.waypointIndex+1:l.waypointIndex}},{distance:0,cost:0,waypoints:[],path:[],durationTime:0,turnByTurnActions:[],shape:null,shapePath:[],waypointIndex:0});return{durationTime:s,distance:n,cost:i,path:u,arriveTime:new Date(r.sections[r.sections.length-1].arrival.time),departureTime:new Date(r.sections[0].departure.time),id:e,waypoints:a,label:r.routeLabels?r.routeLabels.map(l=>l.name.value).join(", "):void 0,shape:o,turnByTurnActions:m,shapePath:f,rawRoute:r}})(o,f,e)),s=function Ge(r,e){return"fastest"===e?r.reduce(function(n,i){return n?.arriveTime.valueOf()<i?.arriveTime.valueOf()?n:i})?.id:"shortest"===e?r.reduce(function(n,i){return n?.distance<i?.distance?n:i})?.id:"cheapest"===e?r.filter(n=>null!=n.cost).reduce(function(n,i){return n?.cost<i?.cost?n:i})?.id:"none"===e?null:0}(i,e.selectRouteStrategy),u=oe(i.reduce((o,f)=>[...o,...f.shape.features.map(m=>({...m,properties:{...m.properties,selected:s===m.properties.routeId}}))],[]));return{routesShapeBounds:Fe(u),rawResponse:n,routes:i,selectedRouteId:s,routesShapeGeojson:u,version:performance.now(),latest:!t.requester.hasPendingRequests,mode:e.mode,requestOptions:e}}catch(n){if(n instanceof Response){const i=n,s=yield i.json();if(401===i.status)throw new qe(s)}throw n}})()}hasPendingRequests(){return this.requester.hasPendingRequests}abortAllRequests(){this.requester.abortAllRequests()}})})()})();