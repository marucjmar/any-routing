(()=>{var f,fe={69:f=>{const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",A=[62,-1,-1,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,63,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],l=typeof BigInt<"u"?BigInt:Number;function P(L){let c=L;return c&l(1)&&(c=~c),c>>=l(1),+c.toString()}function ie(L){let c="",m=l(L);for(;m>31;){const x=m&l(31)|l(32);c+=v[x],m>>=l(5)}return c+v[m]}function U(L){let c=l(L);const m=c<0;return c<<=l(1),m&&(c=~c),ie(c)}f.exports={encode:function G({precision:L=5,thirdDim:c=0,thirdDimPrecision:m=0,polyline:x}){const V=10**L,W=10**m,$=function J(L,c,m){if(L<0||L>15)throw new Error("precision out of range. Should be between 0 and 15");if(m<0||m>15)throw new Error("thirdDimPrecision out of range. Should be between 0 and 15");if(c<0||c>7||4===c||5===c)throw new Error("thirdDim should be between 0, 1, 2, 3, 6 or 7");const x=m<<7|c<<4|L;return ie(1)+ie(x)}(L,c,m),z=[];let j=l(0),Q=l(0),B=l(0);return x.forEach(ee=>{const re=l(Math.round(ee[0]*V));z.push(U(re-j)),j=re;const X=l(Math.round(ee[1]*V));if(z.push(U(X-Q)),Q=X,c){const ae=l(Math.round(ee[2]*W));z.push(U(ae-B)),B=ae}}),[...$,...z].join("")},decode:function p(L){const c=function R(L){let c=l(0),m=l(0);const x=[];if(L.split("").forEach(V=>{const W=l(function b(L){const c=L.charCodeAt(0);return A[c-45]}(V));c|=(W&l(31))<<m,(W&l(32))===l(0)?(x.push(c),c=l(0),m=l(0)):m+=l(5)}),m>0)throw new Error("Invalid encoding");return x}(L),m=function k(L,c){if(1!=+L.toString())throw new Error("Invalid format version");const m=+c.toString();return{precision:15&m,thirdDim:m>>4&7,thirdDimPrecision:m>>7&15}}(c[0],c[1]),x=10**m.precision,V=10**m.thirdDimPrecision,{thirdDim:W}=m;let $=0,z=0,j=0;const Q=[];let B=2;for(;B<c.length;)$+=P(c[B])/x,z+=P(c[B+1])/x,W?(j+=P(c[B+2])/V,Q.push([$,z,j]),B+=3):(Q.push([$,z]),B+=2);if(B!==c.length)throw new Error("Invalid encoding. Premature ending reached");return{...m,polyline:Q}},ABSENT:0,LEVEL:1,ALTITUDE:2,ELEVATION:3}},942:(f,_,v)=>{"use strict";var A=v(841);function S(n,e,t,r,i,s,o){try{var u=n[s](o),a=u.value}catch(g){return void t(g)}u.done?e(a):Promise.resolve(a).then(r,i)}function E(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function o(a){S(s,r,i,o,u,"next",a)}function u(a){S(s,r,i,o,u,"throw",a)}o(void 0)})}}var T=v(69),O=v(572);function U(n,e){void 0===e&&(e={});var t={type:"FeatureCollection"};return e.id&&(t.id=e.id),e.bbox&&(t.bbox=e.bbox),t.features=n,t}function ne(n,e,t){if(null!==n)for(var r,i,s,o,u,a,g,M,C=0,y=0,F=n.type,I="FeatureCollection"===F,Z="Feature"===F,Y=I?n.features.length:1,D=0;D<Y;D++){u=(M=!!(g=I?n.features[D].geometry:Z?n.geometry:n)&&"GeometryCollection"===g.type)?g.geometries.length:1;for(var te=0;te<u;te++){var N=0,H=0;if(null!==(o=M?g.geometries[te]:g)){a=o.coordinates;var q=o.type;switch(C=!t||"Polygon"!==q&&"MultiPolygon"!==q?0:1,q){case null:break;case"Point":if(!1===e(a,y,D,N,H))return!1;y++,N++;break;case"LineString":case"MultiPoint":for(r=0;r<a.length;r++){if(!1===e(a[r],y,D,N,H))return!1;y++,"MultiPoint"===q&&N++}"LineString"===q&&N++;break;case"Polygon":case"MultiLineString":for(r=0;r<a.length;r++){for(i=0;i<a[r].length-C;i++){if(!1===e(a[r][i],y,D,N,H))return!1;y++}"MultiLineString"===q&&N++,"Polygon"===q&&H++}"Polygon"===q&&N++;break;case"MultiPolygon":for(r=0;r<a.length;r++){for(H=0,i=0;i<a[r].length;i++){for(s=0;s<a[r][i].length-C;s++){if(!1===e(a[r][i][s],y,D,N,H))return!1;y++}H++}N++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===ne(o.geometries[r],e,t))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function ue(n){var e=[1/0,1/0,-1/0,-1/0];return ne(n,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}ue.default=ue;const me=ue;class we{constructor(e){this.response=e,this.code=401,this.message="Unauthorized"}}class be{constructor(){this.latestResponseId=0,this.lastResponseId=0,this.buffer=[],this.maxBuffer=4,this.pending=!1}get hasPendingRequests(){return this.pending}request(e,t){var r=this;return E(function*(){const i=new AbortController,s=Date.now();r.lastResponseId=s,r.pending=!0,r.buffer.length>r.maxBuffer&&(r.buffer[0].abort(),r.buffer.splice(0,1)),r.buffer.push(i);const o=yield fetch(e,{...t,signal:i.signal});if(r.cleanBuffer(i),200!==o.status)throw o;if(r.latestResponseId>s)throw new Error("Prev response");return r.pending=r.lastResponseId!==s,r.latestResponseId=s,yield o.json()})()}abortAllRequests(){this.buffer.forEach(e=>e.abort())}cleanBuffer(e){this.buffer=this.buffer.filter(t=>t!==e)}}const Se=(n,e,t)=>{const{distance:r,cost:i,durationTime:s,waypoints:o,path:u,shape:a,shapePath:g,turnByTurnActions:C}=n.sections.reduce((y,M,F)=>{const I=(M.tolls||[]).reduce((q,le)=>(le.fares||[]).forEach(se=>q+=(se.convertedPrice||se.price).value),0),Z=M.summary?.duration||0,Y=[];M.departure.place.originalLocation&&Y.push(M.departure.place.location),M.arrival.place.originalLocation&&(n.sections.length>=2&&F===n.sections.length-1||1===n.sections.length)&&Y.push(M.arrival.place.location);const D=function Re(n){return(0,T.decode)(n).polyline}(M.polyline),te=function Le(n,e){return O(n.map(([t,r])=>({x:t,y:r})),e,!0).map(t=>[+t.y.toFixed(6),+t.x.toFixed(6)])}(D,t),N=(M.turnByTurnActions||[]).map(q=>{const[le,se]=D[q.offset];return{...q,position:{lat:le,lng:se}}}),H=function J(n,e,t){if(void 0===t&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");return function p(n,e,t){void 0===t&&(t={});var r={type:"Feature"};return(0===t.id||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}({type:"LineString",coordinates:n},e,t)}(te,{waypoint:y.waypointIndex,routeId:e});return{distance:y.distance+M.summary?.length||0,durationTime:y.durationTime+Z,cost:y.cost+I,waypoints:[...y.waypoints,...Y],path:[...y.path,...D],turnByTurnActions:N,shape:U([...y.shape?.features||[],H]),shapePath:[...y.shapePath,...te],waypointIndex:"vehicle"===M.type&&n.sections[F+1]&&"vehicle"===n.sections[F+1].type?y.waypointIndex+1:y.waypointIndex}},{distance:0,cost:0,waypoints:[],path:[],durationTime:0,turnByTurnActions:[],shape:null,shapePath:[],waypointIndex:0});return{durationTime:s,distance:r,cost:i,path:u,arriveTime:new Date(n.sections[n.sections.length-1].arrival.time),departureTime:new Date(n.sections[0].departure.time),id:e,waypoints:o,label:n.routeLabels?n.routeLabels.map(y=>y.name.value).join(", "):void 0,shape:a,turnByTurnActions:C,shapePath:g,rawRoute:n}},he=(n,e)=>n.some(t=>{const r=e[t.severity];return r&&("all"===r||r.includes(t.code))}),Me=new class _e{constructor(){this.requester=new be}request(e){var t=this;return E(function*(){try{const r=yield t.requester.request(e.url,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({}),...e.requestParams});if(!r.routes||0===r.routes.length||e.routeExcludeNotice&&((n,e)=>!!he(n.notices||[],e)||(n.routes||[]).some(t=>(t.sections||[]).some(r=>he(r.notices||[],e))))(r,e.routeExcludeNotice))throw new Error("No routes found");const i=r.routes.map((a,g)=>Se(a,g,e.shapePolylinePrecision)),s=function Pe(n,e){return"fastest"===e?n.reduce(function(r,i){return r?.arriveTime.valueOf()<i?.arriveTime.valueOf()?r:i})?.id:"shortest"===e?n.reduce(function(r,i){return r?.distance<i?.distance?r:i})?.id:"cheapest"===e?n.filter(r=>null!=r.cost).reduce(function(r,i){return r?.cost<i?.cost?r:i})?.id:"none"===e?null:0}(i,e.selectRouteStrategy),u=U(i.reduce((a,g)=>[...a,...g.shape.features.map(C=>({...C,properties:{...C.properties,selected:s===C.properties.routeId}}))],[]));return{routesShapeBounds:me(u),rawResponse:r,routes:i,selectedRouteId:s,routesShapeGeojson:u,version:performance.now(),latest:!t.requester.hasPendingRequests,mode:e.mode}}catch(r){if(r instanceof Response){const i=r,s=yield i.json();if(401===i.status)throw new we(s)}throw r}})()}hasPendingRequests(){return this.requester.hasPendingRequests}abortAllRequests(){this.requester.abortAllRequests()}};(0,A.Jj)(Me)},572:(f,_,v)=>{var A;!function(){"use strict";function S(h,l){var p=h.x-l.x,b=h.y-l.y;return p*p+b*b}function E(h,l,p){var b=l.x,R=l.y,k=p.x-b,P=p.y-R;if(0!==k||0!==P){var G=((h.x-b)*k+(h.y-R)*P)/(k*k+P*P);G>1?(b=p.x,R=p.y):G>0&&(b+=k*G,R+=P*G)}return(k=h.x-b)*k+(P=h.y-R)*P}function O(h,l,p,b,R){for(var P,k=b,G=l+1;G<p;G++){var J=E(h[G],h[l],h[p]);J>k&&(P=G,k=J)}k>b&&(P-l>1&&O(h,l,P,b,R),R.push(h[P]),p-P>1&&O(h,P,p,b,R))}function w(h,l){var p=h.length-1,b=[h[0]];return O(h,0,p,l,b),b.push(h[p]),b}function K(h,l,p){if(h.length<=2)return h;var b=void 0!==l?l*l:1;return h=p?h:function T(h,l){for(var R,p=h[0],b=[p],k=1,P=h.length;k<P;k++)S(R=h[k],p)>l&&(b.push(R),p=R);return p!==R&&b.push(R),b}(h,b),w(h,b)}void 0!==(A=function(){return K}.call(_,v,_,f))&&(f.exports=A)}()}},ce={};function d(f){var _=ce[f];if(void 0!==_)return _.exports;var v=ce[f]={exports:{}};return fe[f](v,v.exports,d),v.exports}d.m=fe,d.x=()=>{var f=d.O(void 0,[592],()=>d(942));return d.O(f)},f=[],d.O=(_,v,A,S)=>{if(!v){var T=1/0;for(E=0;E<f.length;E++){for(var[v,A,S]=f[E],O=!0,w=0;w<v.length;w++)(!1&S||T>=S)&&Object.keys(d.O).every(R=>d.O[R](v[w]))?v.splice(w--,1):(O=!1,S<T&&(T=S));if(O){f.splice(E--,1);var K=A();void 0!==K&&(_=K)}}return _}S=S||0;for(var E=f.length;E>0&&f[E-1][2]>S;E--)f[E]=f[E-1];f[E]=[v,A,S]},d.d=(f,_)=>{for(var v in _)d.o(_,v)&&!d.o(f,v)&&Object.defineProperty(f,v,{enumerable:!0,get:_[v]})},d.f={},d.e=f=>Promise.all(Object.keys(d.f).reduce((_,v)=>(d.f[v](f,_),_),[])),d.u=f=>"common.4471ab4b5cbd777d.js",d.miniCssF=f=>{},d.o=(f,_)=>Object.prototype.hasOwnProperty.call(f,_),(()=>{var f;d.tt=()=>(void 0===f&&(f={createScriptURL:_=>_},typeof trustedTypes<"u"&&trustedTypes.createPolicy&&(f=trustedTypes.createPolicy("angular#bundler",f))),f)})(),d.tu=f=>d.tt().createScriptURL(f),d.p="",(()=>{var f={942:1};d.f.i=(S,E)=>{f[S]||importScripts(d.tu(d.p+d.u(S)))};var v=self.webpackChunklibre_routing_playground=self.webpackChunklibre_routing_playground||[],A=v.push.bind(v);v.push=S=>{var[E,T,O]=S;for(var w in T)d.o(T,w)&&(d.m[w]=T[w]);for(O&&O(d);E.length;)f[E.pop()]=1;A(S)}})(),(()=>{var f=d.x;d.x=()=>d.e(592).then(f)})(),d.x()})();